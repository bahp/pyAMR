
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "_examples\tutorial\indexes\plot_core_b_asai.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download__examples_tutorial_indexes_plot_core_b_asai.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr__examples_tutorial_indexes_plot_core_b_asai.py:


Spectrum of Activity (``ASAI``)
===============================

.. warning:: There is an error in the Figure displayed below. The contribution (cont) value
             for Staphylococcus haemolyticus should be 0 instead of 1/10 because the sari
             index is higher than the threshold (32 > 20) and therefore the antimicrobial
             is not considered effective.

The Antimicrobial Spectrum of Activity Index or ``ASAI`` refers to the range of microbe species that are
susceptible to these agents and therefore can be treated. In general, antimicrobial agents
are classified into broad, intermediate or narrow spectrum. Broad spectrum antimicrobials
are active against both Gram-positive and Gram-negative bacteria. In contrast, narrow
spectrum antimicrobials have limited activity and are effective only against particular
species of bacteria. While these profiles appeared in the mid-1950s, little effort has been
made to define them. Furthermore, such ambiguous labels are overused for different
and even contradictory purposes.

For more information see: :py:mod:`pyamr.core.asai.ASAI`

.. image:: ../../../_static/imgs/index-asai.png
    :width: 600
    :align: center
    :alt: ASAI

.. GENERATED FROM PYTHON SOURCE LINES 27-69

.. code-block:: default
   :lineno-start: 28


    # Import libraries
    import sys
    import pandas as pd
    import numpy as np
    import seaborn as sns
    import matplotlib as mpl
    import matplotlib.pyplot as plt

    # Import specific libraries
    from pyamr.core.asai import ASAI
    from pyamr.datasets.load import fixture
    from pyamr.utils.plot import scalar_colormap

    # Configure seaborn style (context=talk)
    sns.set(style="white")

    # Set matplotlib
    mpl.rcParams['xtick.labelsize'] = 9
    mpl.rcParams['ytick.labelsize'] = 9
    mpl.rcParams['axes.titlesize'] = 11
    mpl.rcParams['legend.fontsize'] = 9

    # Pandas configuration
    pd.set_option('display.max_colwidth', 40)
    pd.set_option('display.width', 300)
    pd.set_option('display.precision', 4)

    # Numpy configuration
    np.set_printoptions(precision=2)


    # ---------------------
    # Create data
    # ---------------------
    # Load data
    dataframe = fixture(name='fixture_04.csv')

    # Show
    print("Summary:")
    print(dataframe)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Summary:
                 GENUS              SPECIE    ANTIBIOTIC GRAM  RESISTANCE  FREQUENCY  THRESHOLD  W_SPECIE  W_GENUS
    0   Staphylococcus  coagulase negative  ANTIBIOTIC_1    P        0.88          1        0.2    0.1000   0.3333
    1   Staphylococcus         epidermidis  ANTIBIOTIC_1    P        0.11          1        0.2    0.1000   0.3333
    2   Staphylococcus        haemolyticus  ANTIBIOTIC_1    P        0.32          1        0.2    0.1000   0.3333
    3   Staphylococcus         lugdumensis  ANTIBIOTIC_1    P        0.45          1        0.2    0.1000   0.3333
    4   Staphylococcus       saporphyticus  ANTIBIOTIC_1    P        0.18          1        0.2    0.1000   0.3333
    5   Staphylococcus              aureus  ANTIBIOTIC_1    P        0.13          5        0.2    0.5000   0.3333
    6     Enterococcus              durans  ANTIBIOTIC_1    N        0.64          1        0.2    0.2500   0.3333
    7     Enterococcus             faecium  ANTIBIOTIC_1    N        0.48          1        0.2    0.2500   0.3333
    8     Enterococcus         gallinarium  ANTIBIOTIC_1    N        0.10          1        0.2    0.2500   0.3333
    9     Enterococcus            faecalis  ANTIBIOTIC_1    N        0.09          1        0.2    0.2500   0.3333
    10   Streptococcus           viridians  ANTIBIOTIC_1    P        0.08          1        0.2    0.3333   0.3333
    11   Streptococcus          pneumoniae  ANTIBIOTIC_1    P        0.89          2        0.2    0.6667   0.3333
    12  Staphylococcus  coagulase negative  ANTIBIOTIC_2    P        0.88          1        0.2    0.1000   0.3333
    13  Staphylococcus         epidermidis  ANTIBIOTIC_2    P        0.11          1        0.5    0.1000   0.3333
    14  Staphylococcus        haemolyticus  ANTIBIOTIC_2    P        0.32          1        0.5    0.1000   0.3333
    15  Staphylococcus         lugdumensis  ANTIBIOTIC_2    P        0.45          1        0.5    0.1000   0.3333
    16  Staphylococcus       saporphyticus  ANTIBIOTIC_2    P        0.18          1        0.2    0.1000   0.3333
    17  Staphylococcus              aureus  ANTIBIOTIC_2    P        0.13          5        0.2    0.5000   0.3333
    18    Enterococcus              durans  ANTIBIOTIC_2    N        0.64          1        0.2    0.2500   0.3333
    19    Enterococcus             faecium  ANTIBIOTIC_2    N        0.48          1        0.2    0.2500   0.3333
    20    Enterococcus         gallinarium  ANTIBIOTIC_2    N        0.10          1        0.5    0.2500   0.3333
    21    Enterococcus            faecalis  ANTIBIOTIC_2    N        0.09          1        0.5    0.2500   0.3333
    22   Streptococcus           viridians  ANTIBIOTIC_2    P        0.08          1        0.5    0.3333   0.3333
    23   Streptococcus          pneumoniae  ANTIBIOTIC_2    P        0.89          2        0.5    0.6667   0.3333




.. GENERATED FROM PYTHON SOURCE LINES 70-71

Lets see the dataframe

.. GENERATED FROM PYTHON SOURCE LINES 71-73

.. code-block:: default
   :lineno-start: 71

    dataframe






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>GENUS</th>
          <th>SPECIE</th>
          <th>ANTIBIOTIC</th>
          <th>GRAM</th>
          <th>RESISTANCE</th>
          <th>FREQUENCY</th>
          <th>THRESHOLD</th>
          <th>W_SPECIE</th>
          <th>W_GENUS</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>0</th>
          <td>Staphylococcus</td>
          <td>coagulase negative</td>
          <td>ANTIBIOTIC_1</td>
          <td>P</td>
          <td>0.88</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.1000</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>1</th>
          <td>Staphylococcus</td>
          <td>epidermidis</td>
          <td>ANTIBIOTIC_1</td>
          <td>P</td>
          <td>0.11</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.1000</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>2</th>
          <td>Staphylococcus</td>
          <td>haemolyticus</td>
          <td>ANTIBIOTIC_1</td>
          <td>P</td>
          <td>0.32</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.1000</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>3</th>
          <td>Staphylococcus</td>
          <td>lugdumensis</td>
          <td>ANTIBIOTIC_1</td>
          <td>P</td>
          <td>0.45</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.1000</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>4</th>
          <td>Staphylococcus</td>
          <td>saporphyticus</td>
          <td>ANTIBIOTIC_1</td>
          <td>P</td>
          <td>0.18</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.1000</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>5</th>
          <td>Staphylococcus</td>
          <td>aureus</td>
          <td>ANTIBIOTIC_1</td>
          <td>P</td>
          <td>0.13</td>
          <td>5</td>
          <td>0.2</td>
          <td>0.5000</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>6</th>
          <td>Enterococcus</td>
          <td>durans</td>
          <td>ANTIBIOTIC_1</td>
          <td>N</td>
          <td>0.64</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.2500</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>7</th>
          <td>Enterococcus</td>
          <td>faecium</td>
          <td>ANTIBIOTIC_1</td>
          <td>N</td>
          <td>0.48</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.2500</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>8</th>
          <td>Enterococcus</td>
          <td>gallinarium</td>
          <td>ANTIBIOTIC_1</td>
          <td>N</td>
          <td>0.10</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.2500</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>9</th>
          <td>Enterococcus</td>
          <td>faecalis</td>
          <td>ANTIBIOTIC_1</td>
          <td>N</td>
          <td>0.09</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.2500</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>10</th>
          <td>Streptococcus</td>
          <td>viridians</td>
          <td>ANTIBIOTIC_1</td>
          <td>P</td>
          <td>0.08</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.3333</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>11</th>
          <td>Streptococcus</td>
          <td>pneumoniae</td>
          <td>ANTIBIOTIC_1</td>
          <td>P</td>
          <td>0.89</td>
          <td>2</td>
          <td>0.2</td>
          <td>0.6667</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>12</th>
          <td>Staphylococcus</td>
          <td>coagulase negative</td>
          <td>ANTIBIOTIC_2</td>
          <td>P</td>
          <td>0.88</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.1000</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>13</th>
          <td>Staphylococcus</td>
          <td>epidermidis</td>
          <td>ANTIBIOTIC_2</td>
          <td>P</td>
          <td>0.11</td>
          <td>1</td>
          <td>0.5</td>
          <td>0.1000</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>14</th>
          <td>Staphylococcus</td>
          <td>haemolyticus</td>
          <td>ANTIBIOTIC_2</td>
          <td>P</td>
          <td>0.32</td>
          <td>1</td>
          <td>0.5</td>
          <td>0.1000</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>15</th>
          <td>Staphylococcus</td>
          <td>lugdumensis</td>
          <td>ANTIBIOTIC_2</td>
          <td>P</td>
          <td>0.45</td>
          <td>1</td>
          <td>0.5</td>
          <td>0.1000</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>16</th>
          <td>Staphylococcus</td>
          <td>saporphyticus</td>
          <td>ANTIBIOTIC_2</td>
          <td>P</td>
          <td>0.18</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.1000</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>17</th>
          <td>Staphylococcus</td>
          <td>aureus</td>
          <td>ANTIBIOTIC_2</td>
          <td>P</td>
          <td>0.13</td>
          <td>5</td>
          <td>0.2</td>
          <td>0.5000</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>18</th>
          <td>Enterococcus</td>
          <td>durans</td>
          <td>ANTIBIOTIC_2</td>
          <td>N</td>
          <td>0.64</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.2500</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>19</th>
          <td>Enterococcus</td>
          <td>faecium</td>
          <td>ANTIBIOTIC_2</td>
          <td>N</td>
          <td>0.48</td>
          <td>1</td>
          <td>0.2</td>
          <td>0.2500</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>20</th>
          <td>Enterococcus</td>
          <td>gallinarium</td>
          <td>ANTIBIOTIC_2</td>
          <td>N</td>
          <td>0.10</td>
          <td>1</td>
          <td>0.5</td>
          <td>0.2500</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>21</th>
          <td>Enterococcus</td>
          <td>faecalis</td>
          <td>ANTIBIOTIC_2</td>
          <td>N</td>
          <td>0.09</td>
          <td>1</td>
          <td>0.5</td>
          <td>0.2500</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>22</th>
          <td>Streptococcus</td>
          <td>viridians</td>
          <td>ANTIBIOTIC_2</td>
          <td>P</td>
          <td>0.08</td>
          <td>1</td>
          <td>0.5</td>
          <td>0.3333</td>
          <td>0.3333</td>
        </tr>
        <tr>
          <th>23</th>
          <td>Streptococcus</td>
          <td>pneumoniae</td>
          <td>ANTIBIOTIC_2</td>
          <td>P</td>
          <td>0.89</td>
          <td>2</td>
          <td>0.5</td>
          <td>0.6667</td>
          <td>0.3333</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 74-76

Lets use the ASAI object


.. GENERATED FROM PYTHON SOURCE LINES 77-104

.. code-block:: default
   :lineno-start: 78


    # -------------------------------
    # Create antimicrobial spectrum
    # -------------------------------
    # Create antimicrobial spectrum of activity instance
    asai = ASAI(column_genus='GENUS',
                column_specie='SPECIE',
                column_resistance='RESISTANCE',
                column_frequency='FREQUENCY',
                column_threshold='THRESHOLD',
                column_wgenus='W_GENUS',
                column_wspecie='W_SPECIE')

    # Compute ASAI with uniform weights
    scores1 = asai.compute(dataframe,
        groupby=['ANTIBIOTIC', 'GRAM'],
        weights='uniform',
        threshold=None,
        min_freq=0).unstack()

    # compute ASAI with frequency weights
    scores2 = asai.compute(dataframe,
        groupby=['ANTIBIOTIC', 'GRAM'],
        weights='frequency',
        threshold=None,
        min_freq=0).unstack()








.. GENERATED FROM PYTHON SOURCE LINES 105-106

Lets see the ``ASAI`` with ``uniform`` weights

.. GENERATED FROM PYTHON SOURCE LINES 106-108

.. code-block:: default
   :lineno-start: 106

    scores1






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead tr th {
            text-align: left;
        }

        .dataframe thead tr:last-of-type th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr>
          <th></th>
          <th colspan="2" halign="left">N_GENUS</th>
          <th colspan="2" halign="left">N_SPECIE</th>
          <th colspan="2" halign="left">ASAI_SCORE</th>
        </tr>
        <tr>
          <th>GRAM</th>
          <th>N</th>
          <th>P</th>
          <th>N</th>
          <th>P</th>
          <th>N</th>
          <th>P</th>
        </tr>
        <tr>
          <th>ANTIBIOTIC</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>ANTIBIOTIC_1</th>
          <td>1.0</td>
          <td>2.0</td>
          <td>4.0</td>
          <td>8.0</td>
          <td>0.5</td>
          <td>0.5000</td>
        </tr>
        <tr>
          <th>ANTIBIOTIC_2</th>
          <td>1.0</td>
          <td>2.0</td>
          <td>4.0</td>
          <td>8.0</td>
          <td>0.5</td>
          <td>0.6667</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 109-110

Lets see the ``ASAI`` with ``frequency`` weights

.. GENERATED FROM PYTHON SOURCE LINES 110-112

.. code-block:: default
   :lineno-start: 110

    scores2






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead tr th {
            text-align: left;
        }

        .dataframe thead tr:last-of-type th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr>
          <th></th>
          <th colspan="2" halign="left">N_GENUS</th>
          <th colspan="2" halign="left">N_SPECIE</th>
          <th colspan="2" halign="left">ASAI_SCORE</th>
        </tr>
        <tr>
          <th>GRAM</th>
          <th>N</th>
          <th>P</th>
          <th>N</th>
          <th>P</th>
          <th>N</th>
          <th>P</th>
        </tr>
        <tr>
          <th>ANTIBIOTIC</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>ANTIBIOTIC_1</th>
          <td>1.0</td>
          <td>2.0</td>
          <td>4.0</td>
          <td>8.0</td>
          <td>0.5</td>
          <td>0.6154</td>
        </tr>
        <tr>
          <th>ANTIBIOTIC_2</th>
          <td>1.0</td>
          <td>2.0</td>
          <td>4.0</td>
          <td>8.0</td>
          <td>0.5</td>
          <td>0.7692</td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 113-114

Lets display the information graphically

.. GENERATED FROM PYTHON SOURCE LINES 115-152

.. code-block:: default
   :lineno-start: 116


    def plot_graph_asai(scores):
        """Display ASAI as a horizontal bars
        """
        # Variables to plot.
        x = scores.index.values
        y_n = scores['ASAI_SCORE']['N'].values
        y_p = scores['ASAI_SCORE']['P'].values

        # Constants
        colormap_p = scalar_colormap(y_p, cmap='Blues', vmin=-0.1, vmax=1.1)
        colormap_n = scalar_colormap(y_n, cmap='Reds', vmin=-0.1, vmax=1.1)

        # Create figure
        f, ax = plt.subplots(1, 1, figsize=(8, 0.5))

        # Plot
        sns.barplot(x=y_p, y=x, palette=colormap_p, ax=ax, orient='h',
                    saturation=0.5, label='Gram-positive')
        sns.barplot(x=-y_n, y=x, palette=colormap_n, ax=ax, orient='h',
                    saturation=0.5, label='Gram-negative')

        # Configure
        sns.despine(bottom=True)

        # Configure
        ax.set_xlim([-1, 1])
        ax.legend(loc='center left')

    # -----------------------------
    # Plot
    # -----------------------------
    # Display bar graphs
    plot_graph_asai(scores1)
    plot_graph_asai(scores2)

    # Display
    plt.show()


.. rst-class:: sphx-glr-horizontal


    *

      .. image-sg:: /_examples/tutorial/indexes/images/sphx_glr_plot_core_b_asai_001.png
         :alt: plot core b asai
         :srcset: /_examples/tutorial/indexes/images/sphx_glr_plot_core_b_asai_001.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /_examples/tutorial/indexes/images/sphx_glr_plot_core_b_asai_002.png
         :alt: plot core b asai
         :srcset: /_examples/tutorial/indexes/images/sphx_glr_plot_core_b_asai_002.png
         :class: sphx-glr-multi-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.197 seconds)


.. _sphx_glr_download__examples_tutorial_indexes_plot_core_b_asai.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example




    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_core_b_asai.py <plot_core_b_asai.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_core_b_asai.ipynb <plot_core_b_asai.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
