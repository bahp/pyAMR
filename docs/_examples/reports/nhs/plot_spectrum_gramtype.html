<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SART - Spectrum (gram type) &mdash; pyamr 0.0.1 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/logo-pyamr-icon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="SART - Spectrum (multiple)" href="plot_spectrum_multiple.html" />
    <link rel="prev" title="SARI - Antibiogram (relmap)" href="plot_sari_relmap.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> pyamr
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/registries.html">Registries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage/todo.html">Future Actions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Galleries</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../indexes/index.html">Examples with indexes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../forecasting/index.html">Examples with TSA</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Reports</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#mimic-critical-care">MIMIC Critical Care</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#imperial-college-nhs-trust">Imperial College NHS Trust</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="plot_describe.html">Describe</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_nhs_treemap.html">HTML - Treemap (sari)</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_sari_clustermap.html">SARI - Antibiogram (clustered)</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_sari_heatmap.html">SARI - Antibiogram</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_sari_relmap.html">SARI - Antibiogram (relmap)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">SART - Spectrum (gram type)</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_spectrum_multiple.html">SART - Spectrum (multiple)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../visualization/index.html">Visualization</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">pyamr</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Reports</a> &raquo;</li>
      <li>SART - Spectrum (gram type)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/_examples/reports/nhs/plot_spectrum_gramtype.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-examples-reports-nhs-plot-spectrum-gramtype-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="sart-spectrum-gram-type">
<span id="sphx-glr-examples-reports-nhs-plot-spectrum-gramtype-py"></span><h1>SART - Spectrum (gram type)<a class="headerlink" href="#sart-spectrum-gram-type" title="Permalink to this headline">ÔÉÅ</a></h1>
<ul class="sphx-glr-horizontal">
<li><img alt="BLDCUL" class="sphx-glr-multi-img" src="../../../_images/sphx_glr_plot_spectrum_gramtype_0011.png" />
</li>
<li><img alt="SPTCUL" class="sphx-glr-multi-img" src="../../../_images/sphx_glr_plot_spectrum_gramtype_0021.png" />
</li>
<li><img alt="URICUL" class="sphx-glr-multi-img" src="../../../_images/sphx_glr_plot_spectrum_gramtype_0031.png" />
</li>
<li><img alt="WOUCUL" class="sphx-glr-multi-img" src="../../../_images/sphx_glr_plot_spectrum_gramtype_0041.png" />
</li>
<li><img alt="XINCUL" class="sphx-glr-multi-img" src="../../../_images/sphx_glr_plot_spectrum_gramtype_0051.png" />
</li>
</ul>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>SARI (overall):
sensitivity                                          fix  hide  highly resistant  intermediate  not done  resistant  sensitive  freq  sari
specimen_code microorganism_name antimicrobial_name
BLDCUL        abiotrophia        clindamycin         0.0   0.0               0.0           0.0       0.0        0.0        1.0   1.0   0.0
                                 erythromycin        0.0   0.0               0.0           0.0       0.0        1.0        0.0   1.0   1.0
                                 penicillin          0.0   0.0               0.0           0.0       0.0        0.0        1.0   1.0   0.0
                                 teicoplanin         0.0   0.0               0.0           0.0       0.0        1.0        0.0   1.0   1.0
                                 vancomycin          0.0   0.0               0.0           0.0       0.0        0.0        1.0   1.0   0.0
...                                                  ...   ...               ...           ...       ...        ...        ...   ...   ...
XINCUL        yeasts             gentamicin          0.0   0.0               0.0           0.0       0.0        0.0        1.0   1.0   0.0
                                 linezolid           0.0   0.0               0.0           0.0       0.0        0.0        1.0   1.0   0.0
                                 teicoplanin         0.0   0.0               0.0           0.0       0.0        0.0        1.0   1.0   0.0
                                 tetracycline        0.0   0.0               0.0           0.0       0.0        1.0        0.0   1.0   1.0
                                 vancomycin          0.0   0.0               0.0           0.0       0.0        0.0        1.0   1.0   0.0

[12012 rows x 9 columns]
c:\users\kelda\desktop\repositories\github\pyamr\main\pyamr\core\asai.py:527: UserWarning:


                 Extreme resistances were found in the DataFrame. These rows
                 should be reviewed since these resistances might correspond
                 to pairs with low number of records.


c:\users\kelda\desktop\repositories\github\pyamr\main\pyamr\core\asai.py:538: UserWarning:


                 There are NULL values in columns that are required. These
                 rows will be ignored to safely compute ASAI. Please review
                 the DataFrame and address this inconsistencies. See below
                 for more information:

                        specimen_code            0
                        antimicrobial_name       0
                        gram_stain               0
                        GENUS                    0
                        SPECIE                3594
                        RESISTANCE             169



ASAI (overall):
                                 N_GENUS            N_SPECIE             ASAI_SCORE                   width   gmean
gram_stain                             n     p    u        n     p     u          n       p       u
specimen_code antimicrobial_name
BLDCUL        amikacin              30.0   2.0  6.0     53.0   2.0  10.0     0.8000  0.5000  0.8333  2.1333  0.5774
              amoxycillin           32.0  10.0  6.0     56.0  26.0  11.0     0.3693  0.6300  0.0952  1.0945  0.1488
              amp c markers         19.0   1.0  4.0     27.0   1.0   6.0     0.3684  0.0000  0.6250  0.9934  0.0000
              amphotericin           NaN   NaN  2.0      NaN   NaN   8.0        NaN     NaN  0.9286  0.9286  0.9636
              anidulafungin          NaN   NaN  1.0      NaN   NaN   2.0        NaN     NaN  1.0000  1.0000  1.0000
...                                  ...   ...  ...      ...   ...   ...        ...     ...     ...     ...     ...
XINCUL        timentin               5.0   NaN  NaN      5.0   NaN   NaN     0.2000     NaN     NaN  0.2000  0.4472
              tobramycin            11.0   NaN  4.0     19.0   NaN   6.0     0.6818     NaN  0.6250  1.3068  0.6528
              trimethoprim          11.0   3.0  4.0     17.0   4.0   4.0     0.2424  0.6667  0.5000  1.4091  0.2843
              vancomycin             1.0   4.0  2.0      1.0  11.0   2.0     1.0000  0.8333  1.0000  2.8333  0.9129
              voriconazole           NaN   NaN  1.0      NaN   NaN   2.0        NaN     NaN  1.0000  1.0000  1.0000

[339 rows x 11 columns]


ASAI (BLDCUL)
           specimen_code antimicrobial_name N_GENUS           N_SPECIE            ASAI_SCORE                width   gmean
gram_stain                                        n    p    u        n     p    u          n       p    u
66                BLDCUL            tazocin    35.0  3.0  6.0     58.0   3.0  8.0     0.9419  1.0000  1.0  2.9419  0.9705
70                BLDCUL        tigecycline    28.0  4.0  4.0     48.0   8.0  7.0     0.9196  1.0000  1.0  2.9196  0.9590
45                BLDCUL          meropenem    36.0  2.0  5.0     59.0   2.0  7.0     0.9528  1.0000  0.8  2.7528  0.8731
46                BLDCUL      metronidazole     4.0  3.0  3.0      7.0   4.0  5.0     1.0000  0.6667  1.0  2.6667  0.8165
43                BLDCUL          linezolid     3.0  8.0  2.0      3.0  24.0  7.0     1.0000  1.0000  0.5  2.5000  0.7071
..                   ...                ...     ...  ...  ...      ...   ...  ...        ...     ...  ...     ...     ...
27                BLDCUL         cpo marker     3.0  NaN  NaN      3.0   NaN  NaN     0.0000     NaN  NaN  0.0000  0.0000
55                BLDCUL         novobiocin     NaN  1.0  NaN      NaN   2.0  NaN        NaN  0.0000  NaN  0.0000  0.0000
63                BLDCUL      spectinomycin     1.0  NaN  NaN      1.0   NaN  NaN     0.0000     NaN  NaN  0.0000  0.0000
62                BLDCUL            septrin     1.0  NaN  NaN      1.0   NaN  NaN     0.0000     NaN  NaN  0.0000  0.0000
56                BLDCUL           optochin     NaN  1.0  NaN      NaN   2.0  NaN        NaN  0.0000  NaN  0.0000  0.0000

[76 rows x 13 columns]


ASAI (SPTCUL)
           specimen_code       antimicrobial_name N_GENUS           N_SPECIE             ASAI_SCORE                   width   gmean
gram_stain                                              n    p    u        n     p     u          n       p       u
117               SPTCUL             moxifloxacin     1.0  2.0  1.0      1.0   3.0   1.0     1.0000  1.0000  1.0000  3.0000  1.0000
129               SPTCUL              tigecycline    17.0  4.0  9.0     30.0   5.0   9.0     0.9294  1.0000  1.0000  2.9294  0.9641
125               SPTCUL                  tazocin    19.0  4.0  9.0     37.0   5.0  10.0     0.9211  1.0000  1.0000  2.9211  0.9597
91                SPTCUL              ceftriaxone    12.0  3.0  3.0     18.0   4.0   2.0     0.9167  1.0000  1.0000  2.9167  0.9574
85                SPTCUL               cefotaxime    20.0  4.0  9.0     36.0   4.0   9.0     0.7800  1.0000  1.0000  2.7800  0.8832
112               SPTCUL             levofloxacin     4.0  2.0  2.0      7.0   3.0   2.0     1.0000  0.7500  1.0000  2.7500  0.8660
131               SPTCUL               tobramycin    17.0  4.0  9.0     34.0   5.0   9.0     0.8235  1.0000  0.8889  2.7124  0.8556
76                SPTCUL                 amikacin    17.0  4.0  9.0     35.0   5.0   9.0     0.9412  0.7500  1.0000  2.6912  0.8402
114               SPTCUL                meropenem    19.0  4.0  9.0     37.0   5.0   9.0     0.9211  0.8750  0.8889  2.6849  0.8464
110               SPTCUL                 imipenem    10.0  3.0  6.0     16.0   4.0   7.0     0.8000  1.0000  0.8333  2.6333  0.8165
124               SPTCUL               rifampicin     3.0  5.0  3.0      4.0   9.0   4.0     0.8333  0.7500  1.0000  2.5833  0.7906
88                SPTCUL              ceftazidime    17.0  4.0  9.0     34.0   5.0  10.0     0.9294  0.7500  0.8889  2.5683  0.7872
105               SPTCUL           flucloxacillin     2.0  4.0  3.0      2.0   8.0   4.0     1.0000  0.5625  1.0000  2.5625  0.7500
108               SPTCUL             fusidic acid     2.0  5.0  3.0      2.0   9.0   4.0     1.0000  0.5500  1.0000  2.5500  0.7416
118               SPTCUL                mupirocin     2.0  4.0  3.0      2.0   8.0   4.0     1.0000  0.5000  1.0000  2.5000  0.7071
109               SPTCUL               gentamicin    17.0  8.0  9.0     35.0  14.0  10.0     0.8235  0.7812  0.8889  2.4937  0.7562
128               SPTCUL             tetracycline     7.0  6.0  3.0     12.0  23.0   4.0     1.0000  0.4643  1.0000  2.4643  0.6814
94                SPTCUL            ciprofloxacin    20.0  7.0  9.0     41.0  11.0  10.0     0.8250  0.6071  1.0000  2.4321  0.7077
127               SPTCUL               temocillin    17.0  3.0  9.0     30.0   3.0  10.0     0.8235  0.6667  0.8889  2.3791  0.6986
96                SPTCUL              clindamycin     3.0  5.0  3.0      3.0  20.0   4.0     0.6667  0.7000  1.0000  2.3667  0.6831
98                SPTCUL        colistin sulphate    17.0  4.0  9.0     33.0   5.0   9.0     0.7059  0.7500  0.8889  2.3448  0.6860
92                SPTCUL               cefuroxime    20.0  4.0  9.0     38.0   6.0  10.0     0.6983  0.7500  0.8889  2.3372  0.6823
119               SPTCUL           naladixic acid     5.0  1.0  2.0     11.0   3.0   3.0     1.0000  0.3333  1.0000  2.3333  0.5774
102               SPTCUL                ertapenem    18.0  3.0  9.0     31.0   3.0  10.0     0.7667  0.6667  0.8889  2.3222  0.6740
99                SPTCUL            cotrimoxazole    16.0  2.0  4.0     22.0   2.0   4.0     0.8125  0.5000  1.0000  2.3125  0.6374
80                SPTCUL                augmentin    20.0  4.0  9.0     38.0   6.0  10.0     0.5100  0.7500  0.8889  2.1489  0.5831
86                SPTCUL                cefoxitin    17.0  3.0  9.0     30.0   3.0  10.0     0.5412  0.6667  0.8889  2.0967  0.5663
95                SPTCUL           clarithromycin     5.0  1.0  2.0      9.0   3.0   3.0     0.6000  0.6667  0.7500  2.0167  0.5477
82                SPTCUL                aztreonam    17.0  4.0  9.0     34.0   5.0   9.0     0.7451  0.3750  0.8889  2.0090  0.4984
113               SPTCUL                linezolid     NaN  5.0  1.0      NaN   8.0   1.0        NaN  1.0000  1.0000  2.0000  1.0000
126               SPTCUL              teicoplanin     NaN  3.0  2.0      NaN  16.0   2.0        NaN  1.0000  1.0000  2.0000  1.0000
133               SPTCUL               vancomycin     NaN  6.0  2.0      NaN  20.0   2.0        NaN  1.0000  1.0000  2.0000  1.0000
103               SPTCUL             erythromycin     6.0  5.0  3.0      9.0  20.0   4.0     0.5556  0.4192  1.0000  1.9748  0.4826
123               SPTCUL  piperacillin-tazobactam    11.0  1.0  NaN     17.0   1.0   NaN     0.9091  1.0000     NaN  1.9091  0.9535
132               SPTCUL             trimethoprim    17.0  7.0  9.0     30.0  11.0  10.0     0.5490  0.5000  0.8333  1.8824  0.4783
89                SPTCUL    ceftazidime-avibactam    10.0  1.0  NaN     13.0   1.0   NaN     0.8000  1.0000     NaN  1.8000  0.8944
97                SPTCUL             co-amoxiclav    12.0  1.0  NaN     19.0   1.0   NaN     0.6111  1.0000     NaN  1.6111  0.7817
78                SPTCUL            amp c markers    16.0  2.0  8.0     26.0   2.0   7.0     0.5292  0.5000  0.5000  1.5292  0.3637
93                SPTCUL          chloramphenicol     2.0  3.0  NaN      3.0   3.0   NaN     0.5000  1.0000     NaN  1.5000  0.7071
122               SPTCUL               penicillin     6.0  5.0  3.0      7.0  20.0   4.0     0.3333  0.4000  0.3333  1.0667  0.2108
81                SPTCUL             azithromycin     1.0  1.0  NaN      1.0   1.0   NaN     1.0000  0.0000     NaN  1.0000  0.0000
120               SPTCUL                 neomycin     NaN  2.0  NaN      NaN   2.0   NaN        NaN  1.0000     NaN  1.0000  1.0000
121               SPTCUL                oxacillin     NaN  2.0  NaN      NaN   2.0   NaN        NaN  1.0000     NaN  1.0000  1.0000
79                SPTCUL             amphotericin     NaN  NaN  2.0      NaN   NaN   6.0        NaN     NaN  1.0000  1.0000  1.0000
134               SPTCUL             voriconazole     NaN  NaN  2.0      NaN   NaN   6.0        NaN     NaN  1.0000  1.0000  1.0000
115               SPTCUL            metronidazole     NaN  NaN  2.0      NaN   NaN   2.0        NaN     NaN  1.0000  1.0000  1.0000
83                SPTCUL              caspofungin     NaN  NaN  2.0      NaN   NaN   6.0        NaN     NaN  1.0000  1.0000  1.0000
77                SPTCUL              amoxycillin    20.0  5.0  9.0     36.0   8.0  10.0     0.3350  0.5000  0.1111  0.9461  0.1364
106               SPTCUL              fluconazole     NaN  NaN  2.0      NaN   NaN   6.0        NaN     NaN  0.9000  0.9000  0.9487
111               SPTCUL             itraconazole     NaN  NaN  2.0      NaN   NaN   6.0        NaN     NaN  0.8000  0.8000  0.8944
116               SPTCUL              mls markers     NaN  5.0  3.0      NaN  16.0   4.0        NaN  0.1067  0.5000  0.6067  0.2309
87                SPTCUL              cefpodoxime     7.0  NaN  NaN      7.0   NaN   NaN     0.5714     NaN     NaN  0.5714  0.7559
90                SPTCUL   ceftolozane-tazobactam     2.0  NaN  NaN      2.0   NaN   NaN     0.5000     NaN     NaN  0.5000  0.7071
84                SPTCUL                 cefepime     3.0  NaN  NaN      4.0   NaN   NaN     0.5000     NaN     NaN  0.5000  0.7071
130               SPTCUL                 timentin     7.0  NaN  NaN      7.0   NaN   NaN     0.4286     NaN     NaN  0.4286  0.6547
104               SPTCUL             esbl markers    14.0  1.0  8.0     24.0   1.0   7.0     0.2143  0.0000  0.1250  0.3393  0.0000
107               SPTCUL              flucytosine     NaN  NaN  2.0      NaN   NaN   6.0        NaN     NaN  0.3000  0.3000  0.5477
101               SPTCUL              cpo markers     1.0  NaN  NaN      1.0   NaN   NaN     0.0000     NaN     NaN  0.0000  0.0000
100               SPTCUL               cpo marker     6.0  1.0  1.0      8.0   1.0   1.0     0.0000  0.0000  0.0000  0.0000  0.0000


ASAI (URICUL)
           specimen_code antimicrobial_name N_GENUS           N_SPECIE            ASAI_SCORE                width   gmean
gram_stain                                        n    p    u        n     p    u          n       p    u
178               URICUL          meropenem    19.0  4.0  3.0     34.0   4.0  3.0     0.9474  1.0000  1.0  2.9474  0.9733
194               URICUL            tazocin    18.0  3.0  4.0     33.0   3.0  4.0     0.8750  1.0000  1.0  2.8750  0.9354
202               URICUL         vancomycin     5.0  4.0  2.0      5.0  21.0  2.0     0.8000  1.0000  1.0  2.8000  0.8944
164               URICUL          ertapenem    17.0  4.0  3.0     30.0   4.0  3.0     0.7059  1.0000  1.0  2.7059  0.8402
197               URICUL       tetracycline     3.0  7.0  1.0      3.0  24.0  1.0     1.0000  0.6667  1.0  2.6667  0.8165
..                   ...                ...     ...  ...  ...      ...   ...  ...        ...     ...  ...     ...     ...
180               URICUL        mls markers     NaN  3.0  NaN      NaN  15.0  NaN        NaN  0.1407  NaN  0.1407  0.3752
144               URICUL           cefepime     3.0  NaN  NaN      3.0   NaN  NaN     0.0000     NaN  NaN  0.0000  0.0000
156               URICUL     clarithromycin     1.0  NaN  NaN      1.0   NaN  NaN     0.0000     NaN  NaN  0.0000  0.0000
163               URICUL         daptomycin     NaN  1.0  NaN      NaN   1.0  NaN        NaN  0.0000  NaN  0.0000  0.0000
162               URICUL        cpo markers     3.0  NaN  NaN      3.0   NaN  NaN     0.0000     NaN  NaN  0.0000  0.0000

[69 rows x 13 columns]


ASAI (WOUCUL)
           specimen_code antimicrobial_name N_GENUS           N_SPECIE             ASAI_SCORE                width   gmean
gram_stain                                        n    p    u        n     p     u          n       p    u
249               WOUCUL      metronidazole     6.0  4.0  8.0      8.0   8.0  16.0     1.0000  1.0000  1.0  3.0000  1.0000
245               WOUCUL       levofloxacin     3.0  2.0  1.0      3.0   4.0   1.0     1.0000  1.0000  1.0  3.0000  1.0000
267               WOUCUL            tazocin    25.0  6.0  7.0     48.0  10.0  11.0     0.9900  1.0000  1.0  2.9900  0.9950
248               WOUCUL          meropenem    24.0  6.0  7.0     46.0   8.0   9.0     0.9514  1.0000  1.0  2.9514  0.9754
255               WOUCUL           neomycin     8.0  3.0  2.0     10.0   9.0   2.0     1.0000  0.8333  1.0  2.8333  0.9129
..                   ...                ...     ...  ...  ...      ...   ...   ...        ...     ...  ...     ...     ...
226               WOUCUL     clarithromycin     4.0  NaN  1.0      6.0   NaN   1.0     0.3333     NaN  0.0  0.3333  0.0000
231               WOUCUL         cpo marker     6.0  NaN  NaN      7.0   NaN   NaN     0.1667     NaN  NaN  0.1667  0.4082
237               WOUCUL       esbl markers    13.0  2.0  5.0     27.0   2.0   4.0     0.1474  0.0000  0.0  0.1474  0.0000
251               WOUCUL        mls markers     3.0  8.0  8.0      3.0  30.0  11.0     0.0000  0.0688  0.0  0.0688  0.0000
264               WOUCUL          sulbactam     1.0  NaN  NaN      1.0   NaN   NaN     0.0000     NaN  NaN  0.0000  0.0000

[73 rows x 13 columns]


ASAI (XINCUL)
           specimen_code antimicrobial_name N_GENUS           N_SPECIE            ASAI_SCORE                 width   gmean
gram_stain                                        n    p    u        n     p    u          n       p     u
311               XINCUL          linezolid     1.0  2.0  2.0      1.0   5.0  2.0     1.0000  1.0000  1.00  3.0000  1.0000
337               XINCUL         vancomycin     1.0  4.0  2.0      1.0  11.0  2.0     1.0000  0.8333  1.00  2.8333  0.9129
330               XINCUL        teicoplanin     1.0  3.0  2.0      1.0   9.0  3.0     1.0000  0.7778  0.75  2.5278  0.7638
333               XINCUL        tigecycline    11.0  1.0  4.0     17.0   3.0  5.0     0.9091  1.0000  0.50  2.4091  0.6742
307               XINCUL         gentamicin    12.0  4.0  5.0     22.0   7.0  8.0     0.7708  0.8333  0.72  2.3242  0.6801
..                   ...                ...     ...  ...  ...      ...   ...  ...        ...     ...   ...     ...     ...
295               XINCUL     clarithromycin     1.0  NaN  NaN      1.0   NaN  NaN     0.0000     NaN   NaN  0.0000  0.0000
327               XINCUL          sulbactam     1.0  NaN  NaN      1.0   NaN  NaN     0.0000     NaN   NaN  0.0000  0.0000
326               XINCUL            septrin     1.0  NaN  NaN      1.0   NaN  NaN     0.0000     NaN   NaN  0.0000  0.0000
288               XINCUL        cefpodoxime     4.0  NaN  NaN      4.0   NaN  NaN     0.0000     NaN   NaN  0.0000  0.0000
322               XINCUL           optochin     NaN  1.0  NaN      NaN   1.0  NaN        NaN  0.0000   NaN  0.0000  0.0000

[62 rows x 13 columns]
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">  8</span> <span class="kn">import</span> <span class="nn">sys</span>
<span class="linenos">  9</span> <span class="kn">import</span> <span class="nn">glob</span>
<span class="linenos"> 10</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="linenos"> 11</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="linenos"> 12</span> <span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="linenos"> 13</span> <span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="linenos"> 14</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="linenos"> 15</span>
<span class="linenos"> 16</span> <span class="c1"># Import specific libraries</span>
<span class="linenos"> 17</span> <span class="kn">from</span> <span class="nn">pyamr.core.sari</span> <span class="kn">import</span> <span class="n">SARI</span>
<span class="linenos"> 18</span> <span class="kn">from</span> <span class="nn">pyamr.core.asai</span> <span class="kn">import</span> <span class="n">ASAI</span>
<span class="linenos"> 19</span> <span class="kn">from</span> <span class="nn">pyamr.datasets.load</span> <span class="kn">import</span> <span class="n">load_data_nhs</span>
<span class="linenos"> 20</span> <span class="kn">from</span> <span class="nn">pyamr.datasets.registries</span> <span class="kn">import</span> <span class="n">MicroorganismRegistry</span>
<span class="linenos"> 21</span> <span class="kn">from</span> <span class="nn">pyamr.utils.plot</span> <span class="kn">import</span> <span class="n">scalar_colormap</span>
<span class="linenos"> 22</span>
<span class="linenos"> 23</span> <span class="c1"># Configure seaborn style (context=talk)</span>
<span class="linenos"> 24</span> <span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
<span class="linenos"> 25</span>
<span class="linenos"> 26</span> <span class="c1"># Set matplotlib</span>
<span class="linenos"> 27</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.labelsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span>
<span class="linenos"> 28</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.labelsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span>
<span class="linenos"> 29</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.titlesize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">11</span>
<span class="linenos"> 30</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;legend.fontsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span>
<span class="linenos"> 31</span>
<span class="linenos"> 32</span> <span class="c1"># Pandas configuration</span>
<span class="linenos"> 33</span> <span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_colwidth&#39;</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="linenos"> 34</span> <span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.width&#39;</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="linenos"> 35</span> <span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.precision&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos"> 36</span>
<span class="linenos"> 37</span> <span class="c1"># Numpy configuration</span>
<span class="linenos"> 38</span> <span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos"> 39</span>
<span class="linenos"> 40</span> <span class="c1"># --------------------------------------------------------------------</span>
<span class="linenos"> 41</span> <span class="c1">#                               Main</span>
<span class="linenos"> 42</span> <span class="c1"># --------------------------------------------------------------------</span>
<span class="linenos"> 43</span> <span class="c1"># Load data</span>
<span class="linenos"> 44</span> <span class="n">data</span><span class="p">,</span> <span class="n">antibiotics</span><span class="p">,</span> <span class="n">organisms</span> <span class="o">=</span> <span class="n">load_data_nhs</span><span class="p">()</span>
<span class="linenos"> 45</span>
<span class="linenos"> 46</span> <span class="c1"># Count records per specimen code</span>
<span class="linenos"> 47</span> <span class="n">specimen_code_count</span> <span class="o">=</span> <span class="n">data</span> \
<span class="linenos"> 48</span>     <span class="o">.</span><span class="n">specimen_code</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> \
<span class="linenos"> 49</span>     <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos"> 50</span>
<span class="linenos"> 51</span> <span class="c1"># Filter most frequent specimens</span>
<span class="linenos"> 52</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">specimen_code</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span> \
<span class="linenos"> 53</span>     <span class="n">specimen_code_count</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">[:</span><span class="mi">5</span><span class="p">])]</span>
<span class="linenos"> 54</span>
<span class="linenos"> 55</span> <span class="c1"># -------------------</span>
<span class="linenos"> 56</span> <span class="c1"># Compute SARI</span>
<span class="linenos"> 57</span> <span class="c1"># -------------------</span>
<span class="linenos"> 58</span> <span class="c1"># Create sari instance</span>
<span class="linenos"> 59</span> <span class="n">sari</span> <span class="o">=</span> <span class="n">SARI</span><span class="p">(</span><span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;specimen_code&#39;</span><span class="p">,</span>
<span class="linenos"> 60</span>                      <span class="s1">&#39;microorganism_name&#39;</span><span class="p">,</span>
<span class="linenos"> 61</span>                      <span class="s1">&#39;antimicrobial_name&#39;</span><span class="p">,</span>
<span class="linenos"> 62</span>                      <span class="s1">&#39;sensitivity&#39;</span><span class="p">])</span>
<span class="linenos"> 63</span>
<span class="linenos"> 64</span> <span class="c1"># Compute SARI overall</span>
<span class="linenos"> 65</span> <span class="n">sari_overall</span> <span class="o">=</span> <span class="n">sari</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">data</span><span class="p">,</span>
<span class="linenos"> 66</span>     <span class="n">return_frequencies</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 67</span>
<span class="linenos"> 68</span> <span class="c1"># Show</span>
<span class="linenos"> 69</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;SARI (overall):&quot;</span><span class="p">)</span>
<span class="linenos"> 70</span> <span class="nb">print</span><span class="p">(</span><span class="n">sari_overall</span><span class="p">)</span>
<span class="linenos"> 71</span>
<span class="linenos"> 72</span> <span class="c1"># ------------------------------</span>
<span class="linenos"> 73</span> <span class="c1"># Include registry information</span>
<span class="linenos"> 74</span> <span class="c1"># ------------------------------</span>
<span class="linenos"> 75</span> <span class="c1"># Load registry</span>
<span class="linenos"> 76</span> <span class="n">mreg</span> <span class="o">=</span> <span class="n">MicroorganismRegistry</span><span class="p">()</span>
<span class="linenos"> 77</span>
<span class="linenos"> 78</span> <span class="c1"># Format sari dataframe</span>
<span class="linenos"> 79</span> <span class="n">dataframe</span> <span class="o">=</span> <span class="n">sari_overall</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 80</span> <span class="n">dataframe</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="linenos"> 81</span>
<span class="linenos"> 82</span> <span class="c1"># Create genus and species</span>
<span class="linenos"> 83</span> <span class="n">dataframe</span><span class="p">[[</span><span class="s1">&#39;genus&#39;</span><span class="p">,</span> <span class="s1">&#39;species&#39;</span><span class="p">]]</span> <span class="o">=</span> \
<span class="linenos"> 84</span>     <span class="n">dataframe</span><span class="o">.</span><span class="n">microorganism_name</span> \
<span class="linenos"> 85</span>         <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> \
<span class="linenos"> 86</span>         <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 87</span>
<span class="linenos"> 88</span> <span class="c1"># Combine with registry information</span>
<span class="linenos"> 89</span> <span class="n">dataframe</span> <span class="o">=</span> <span class="n">mreg</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span><span class="n">dataframe</span><span class="p">)</span>
<span class="linenos"> 90</span>
<span class="linenos"> 91</span> <span class="c1"># Fill missing gram stain</span>
<span class="linenos"> 92</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">gram_stain</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">gram_stain</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s1">&#39;u&#39;</span><span class="p">)</span>
<span class="linenos"> 93</span>
<span class="linenos"> 94</span> <span class="c1"># -------------------------------</span>
<span class="linenos"> 95</span> <span class="c1"># Compute ASAI</span>
<span class="linenos"> 96</span> <span class="c1"># -------------------------------</span>
<span class="linenos"> 97</span> <span class="c1"># Create asai instance</span>
<span class="linenos"> 98</span> <span class="n">asai</span> <span class="o">=</span> <span class="n">ASAI</span><span class="p">(</span><span class="n">column_genus</span><span class="o">=</span><span class="s1">&#39;genus&#39;</span><span class="p">,</span>
<span class="linenos"> 99</span>             <span class="n">column_specie</span><span class="o">=</span><span class="s1">&#39;species&#39;</span><span class="p">,</span>
<span class="linenos">100</span>             <span class="n">column_resistance</span><span class="o">=</span><span class="s1">&#39;sari&#39;</span><span class="p">,</span>
<span class="linenos">101</span>             <span class="n">column_frequency</span><span class="o">=</span><span class="s1">&#39;freq&#39;</span><span class="p">)</span>
<span class="linenos">102</span>
<span class="linenos">103</span> <span class="c1"># Compute</span>
<span class="linenos">104</span> <span class="n">scores</span> <span class="o">=</span> <span class="n">asai</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">dataframe</span><span class="p">,</span>
<span class="linenos">105</span>     <span class="n">groupby</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;specimen_code&#39;</span><span class="p">,</span>
<span class="linenos">106</span>              <span class="s1">&#39;antimicrobial_name&#39;</span><span class="p">,</span>
<span class="linenos">107</span>              <span class="s1">&#39;gram_stain&#39;</span><span class="p">],</span>
<span class="linenos">108</span>     <span class="n">weights</span><span class="o">=</span><span class="s1">&#39;uniform&#39;</span><span class="p">,</span>
<span class="linenos">109</span>     <span class="n">threshold</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
<span class="linenos">110</span>     <span class="n">min_freq</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">111</span>
<span class="linenos">112</span> <span class="c1"># Stack</span>
<span class="linenos">113</span> <span class="n">scores</span> <span class="o">=</span> <span class="n">scores</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
<span class="linenos">114</span>
<span class="linenos">115</span> <span class="c1"># .. note: In order to sort the scores we need to compute metrics</span>
<span class="linenos">116</span> <span class="c1">#          that combine the different subcategories (e.g. gram-negative</span>
<span class="linenos">117</span> <span class="c1">#          and gram-positive). Two possible options are: (i) use the</span>
<span class="linenos">118</span> <span class="c1">#          gmean or (ii) the width.</span>
<span class="linenos">119</span> <span class="c1"># Measures</span>
<span class="linenos">120</span> <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="s1">&#39;ASAI_SCORE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="linenos">121</span> <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;gmean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="s1">&#39;ASAI_SCORE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="linenos">122</span>
<span class="linenos">123</span> <span class="c1"># Show</span>
<span class="linenos">124</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ASAI (overall):&quot;</span><span class="p">)</span>
<span class="linenos">125</span> <span class="nb">print</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span>
<span class="linenos">126</span>
<span class="linenos">127</span>
<span class="linenos">128</span> <span class="c1"># -------------------------------------------</span>
<span class="linenos">129</span> <span class="c1"># Plot</span>
<span class="linenos">130</span> <span class="c1"># -------------------------------------------</span>
<span class="linenos">131</span> <span class="c1"># Reset</span>
<span class="linenos">132</span> <span class="n">scores</span> <span class="o">=</span> <span class="n">scores</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="linenos">133</span>
<span class="linenos">134</span> <span class="c1"># Loop</span>
<span class="linenos">135</span> <span class="k">for</span> <span class="n">specimen</span><span class="p">,</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">scores</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;specimen_code&#39;</span><span class="p">):</span>
<span class="linenos">136</span>
<span class="linenos">137</span>     <span class="c1"># Sort</span>
<span class="linenos">138</span>     <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">139</span>
<span class="linenos">140</span>     <span class="c1"># Show</span>
<span class="linenos">141</span>     <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">ASAI (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">specimen</span><span class="p">)</span>
<span class="linenos">142</span>     <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="linenos">143</span>
<span class="linenos">144</span>     <span class="c1"># Variables to plot.</span>
<span class="linenos">145</span>     <span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">antimicrobial_name</span>
<span class="linenos">146</span>     <span class="n">y_n</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;ASAI_SCORE&#39;</span><span class="p">][</span><span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="linenos">147</span>     <span class="n">y_p</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;ASAI_SCORE&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="linenos">148</span>
<span class="linenos">149</span>     <span class="c1"># Constants</span>
<span class="linenos">150</span>     <span class="n">colormap_p</span> <span class="o">=</span> <span class="n">scalar_colormap</span><span class="p">(</span><span class="n">y_p</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Blues&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">1.1</span><span class="p">)</span>
<span class="linenos">151</span>     <span class="n">colormap_n</span> <span class="o">=</span> <span class="n">scalar_colormap</span><span class="p">(</span><span class="n">y_n</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Reds&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">1.1</span><span class="p">)</span>
<span class="linenos">152</span>
<span class="linenos">153</span>     <span class="c1"># ----------</span>
<span class="linenos">154</span>     <span class="c1"># Example</span>
<span class="linenos">155</span>     <span class="c1"># ----------</span>
<span class="linenos">156</span>     <span class="c1"># This example shows an stacked figure using more than two categories.</span>
<span class="linenos">157</span>     <span class="c1"># For instance, it uses gram-positive, gram-negative and gram-unknown.</span>
<span class="linenos">158</span>     <span class="c1"># All the indexes go within the range [0,1].</span>
<span class="linenos">159</span>     <span class="c1"># Create figure</span>
<span class="linenos">160</span>     <span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="linenos">161</span>
<span class="linenos">162</span>     <span class="c1"># Plot</span>
<span class="linenos">163</span>     <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">y_p</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">colormap_p</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span>
<span class="linenos">164</span>         <span class="n">saturation</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Gram-positive&#39;</span><span class="p">)</span>
<span class="linenos">165</span>     <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=-</span><span class="n">y_n</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">colormap_n</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span>
<span class="linenos">166</span>         <span class="n">saturation</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Gram-negative&#39;</span><span class="p">)</span>
<span class="linenos">167</span>
<span class="linenos">168</span>     <span class="c1"># Configure</span>
<span class="linenos">169</span>     <span class="n">sns</span><span class="o">.</span><span class="n">despine</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">170</span>
<span class="linenos">171</span>     <span class="c1"># Format figure</span>
<span class="linenos">172</span>     <span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="linenos">173</span>
<span class="linenos">174</span>     <span class="c1"># Set x-axis</span>
<span class="linenos">175</span>     <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="linenos">176</span>
<span class="linenos">177</span>     <span class="c1"># Adjust</span>
<span class="linenos">178</span>     <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="linenos">179</span>     <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">specimen</span><span class="p">)</span>
<span class="linenos">180</span>     <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="linenos">181</span>
<span class="linenos">182</span> <span class="c1"># Show</span>
<span class="linenos">183</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  18.088 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-reports-nhs-plot-spectrum-gramtype-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../../_downloads/492d0493af9d8657a7affa1f8519007e/plot_spectrum_gramtype.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_spectrum_gramtype.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../../_downloads/55a0c420febc59f542e2b07bc3ede171/plot_spectrum_gramtype.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_spectrum_gramtype.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="plot_sari_relmap.html" class="btn btn-neutral float-left" title="SARI - Antibiogram (relmap)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="plot_spectrum_multiple.html" class="btn btn-neutral float-right" title="SART - Spectrum (multiple)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Bernard Hernandez.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>